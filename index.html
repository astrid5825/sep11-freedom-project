<!DOCTYPE html>
<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="style.css" rel="stylesheet" type="text/css" />
        <style>
            /* CSS */

        </style>

        <title>ProjectVD</title>
    </head>
    <body>
        <!-- HTML -->
        <script type="module">
    import kaboom from "https://unpkg.com/kaboom@3000.0.1/dist/kaboom.mjs";

kaboom({
    background: [227, 39, 86],
    fullscreen: true,
})
loadSprite ("azHolder", "azzyPlaceholder.png")
loadSprite ("piHolder","pinkiePlaceholder.png")
loadSprite ("woHolder", "purplesteel.png")
loadSprite ("doHolder", "door.png")
loadSprite ("lockedDoor", "doorPlaceholder.png")
//loadSprite("outsideHolder", "kaboomjs.png")
loadSprite("mystic", "mysticflour.png")
loadSprite("daria", "DariaMorgendorffer.png")
loadSprite("madoka", "Madoka.png")
loadSprite("key", "key.png")
loadSprite("Fake1", "fakekey1.png")
loadSprite("Fake2", "fakekey2.png")

scene("main", (levelIdx) => {
	const levels = [
		[
		"_________",
	  "_       _",
		"_ M     _",
		"_       |",
		"_       _",
		"_   A   _",
		"_________",
	],
	[
		"______L___",
		"_ A      _",
		"_        _",
		"_    R   _",
		"_ 1      _",
		"_     2  _",
		"_        _",
		"_      @ _",
		"__________",
	],
	[
		"_________",
		"_     P _",
		"_       _",
		"_   F   _",
		"_       _",
		"_   A   _",
		"_________",
	],
]

addLevel(levels[levelIdx],{
	tileWidth: 64,
	tileHeight: 64,
	pos: vec2(64,64),
   tiles: {
  "_": () => [
    sprite("woHolder"),
    area(),
   body({ isStatic: true }),
   anchor("center"),
  ],
  "|": () => [
    sprite("doHolder"),
    area(),
    scale(1),
    anchor("center"),
    "unlocked"
  ],
  "L": () =>[
    sprite("lockedDoor"),
    area(),
    "locked"
  ],
  "@": () => [
    sprite("key"),
    area(),
    "key",
  ],
"1": () => [
  sprite("Fake1"),
  area(),
  "fake1",
],
"2": () => [
  sprite("Fake2"),
  area(),
  "fake2"
],
 "A": () => [
    sprite("azHolder"),
    area(),
    scale(.1),
    anchor("center"),
    "player"
  ],
  "P": () => [
    sprite("piHolder"),
    area(),
     scale(.1),
    "Proto",
  ],
  "M": () => [
    sprite("madoka"),
    area(),
     scale(.20),
     anchor("center"),
    "character",
    {msg: "Madotsuki? It's you! Prototype is ahead, Good luck! :)"},
  ],
  "R": () => [
    sprite("daria"),
    area(),
     scale(.1),
    "character",
    {msg: "oh, hello stranger. This door needs a key, but this game needed a challenge and the creator wanted to be cliche. Find the right key to go through."},
  ],
  "F": () => [
   sprite("mystic"),
   area(),
    scale(.3),
  "character",
  {msg:"I fear I am not the one you were looking for."}
  ],
  }
})
const player = get("player")[0]

const dialog = add([
  text("")
])

let hasKey = false

//player.onCollide("key",(key) => {
 // destory(key)
 // hasKey = true
//})

//player.onCollide("locked", () => {
//  if (hasKey){
 //   if(levelIdx + 1 < levels.length){
//      go("main", levelIdx + 1)
 //   } else{
  //    go("main", levelIdx + 2)
 //   }
//  } else{
 //   dialog.text = "Talk to Daria"
 // }
//})

//player.onCollide("character", (ch) => {
 // dialog.text = ch.msg
//})

const SPEED = 200


player.onCollide("character", (ch) => {
		dialog.say(ch.msg)
	})

	const dirs = {
		"left": LEFT,
		"right": RIGHT,
		"up": UP,
		"down": DOWN,
	}

	for (const dir in dirs) {
		onKeyPress(dir, () => {
			dialog.dismiss()
		})
		onKeyDown(dir, () => {
			player.move(dirs[dir].scale(SPEED))
		})
	}

})


//const dirs = {
 // "left": LEFT,
//  "right": RIGHT,
 // "up": UP,
 // "down": DOWN,
//}

//for (const dir in dirs){
//  onKeyDown(dir, () => {
//    dialog.text = ""
//    player.move(dirs[dir].scale(320))
//  })
//}



go("main",0)

//mvp - backup code js in case
// loadSprite ("azHolder", "azzyPlaceholder.png")
// loadSprite ("piHolder","pinkiePlaceholder.png")
// loadSprite ("woHolder", "treehousewallsPlaceholder.png")
// loadSprite ("doHolder", "door.jpg")
// loadSprite("outsideHolder", "kaboomjs.png")

// //scene("game", ({ levelIdx, score }) => {
// const SPEED = 200
//  const player = add([
//     sprite("azHolder"),
//     pos(636,height()- 295),
//     scale(.1),
//    area(),
// ])
//     const x = rand(0, width())
// 	const y = rand(0, height())

// add ([
//     sprite("piHolder"),
//     pos(x, y),
//     area(),
//     scale(.3),
//     "pinky"
// ])

//  onKeyDown("left", () => {
//  	player.move(-SPEED, 0)
//  })

//  onKeyDown("right", () => {
//  	player.move(SPEED, 0)
//  })

//  onKeyDown("up", () => {
//  	player.move(0, -SPEED)
//  })

//  onKeyDown("down", () => {
//  	player.move(0, SPEED)
//  })

//  player.onCollide("pinky", () => {
// 		destory(pinky)
//     //player.pos = level.tile2Pos(0, 0)
// 		go("win")
// //         add([
// //  ])
// 	})

//     let curFont = 0
// let curSize = 48
// const pad = 24

// const builtinFonts = [
// 	"monospace",
// ]

// const fonts = [
// 	...builtinFonts,
// 	"4x4",
// 	"unscii",
// 	"FlowerSketches",
// 	"apl386",
// 	"Sans-Serif",
// ]


//     const input = add([
// 	pos(pad),
// 	// Render text with the text() component
// 	text("where is your buddy?!", {
// 		font: fonts[curFont],
// 		width: width() - pad * 2,
// 		size: curSize,
// 		align: "center",
// 		lineSpacing: 8,
// 		letterSpacing: 4,
// 		transform: (idx, ch) => ({
// 			color: hsl2rgb((time() * 0.2 + idx * 0.1) % 1, 0.7, 0.8),
// 			pos: vec2(0, wave(-4, 4, time() * 4 + idx * 0.5)),
// 			scale: wave(1, 1.2, time() * 3 + idx),
// 			angle: wave(-9, 9, time() * 3 + idx),
// 		}),
// 	}),
// ])


// scene("win", () => {
// 	add([
// 		text("You Win!"),
// 		pos(width() / 2, height() / 2),
// 		anchor("center"),
// 	])
// })
    // text("You found your friend!"),
    // // pos(12),


//level stuff, not MVP
//var levelIdx = 1

//scene("main", (levelIdx) => {

//const SPEED = 200

//const characters ={ (work on this when you can)
//}
//const levels = [
//		[
//			"===|====",
//			"=      =",
//			"=      =",
//			"=      =",
//			"=      =",
//			"=   @  =",
//			"========",
//		],
//		[
//			"--------",
//			"-      -",
//			"-      -",
//			"^      -",
//			"-      -",
//			"-  @   -",
//			"--------",
//		],
//	]
//const level = addLevel(levels[levelIdx],
  //  tileWidth, 64,
//    tileHeight, 64,
  //  pos, vec2(64, 64),
//    tiles, {
//        "=": () => [
//				sprite("woHolder"),
//				area(),
//				body({ isStatic: true }),
//				anchor("center"),
  //          ],
//            "-": () => [
//				sprite("outsideHolder"),
//				area(),
//				body({ isStatic: true }),
//				anchor("center"),
//    ],
  //         "@": () => [
//            sprite("azHolder"),
  //          area(),
//            body({isStatic: true}),
  //          anchor("center"),
//            "Azzy"
  //         ],
    //       "|": () => [
//            sprite("doHolder"),
  //          area(),
    //        body({isStatic: true}),
//            anchor ("center"),
  //          "door"
    //       ],
      //     "^": () => [
//            sprite("piHolder"),
  //          area(),
    //        body({isStatic: true}),
//            anchor("center"),
  //          "Pinky"
//           ],
  //  },
    //       function addDialog() {

            //doesn't work
    //         player.onCollide("door", () => {
	// 	if (player.on) {
	// 		if (levelIdx + 1 < levels.length) {
	// 			go("main", levelIdx + 1)
	// 		} else {
	// 			go("win")
	// 		}
	// 	} else {
	// 		dialog.say("you got no key!")
	// 	}
	// })



           //pinky himself
//            let Pinky = false,
//  player.onCollide("piHolder", (Pinky) => {
// 		destroy(Pinky)
// 		Pinky = true
// 	})

//    }
//)


 //}
//)
//go("main", 0)
//     kaboom({
//     fullscreen: true,
//     canvas: document.getElementById("game"),
//     background: [10, 100, 200], // RGB values for black background
// });
//     loadSprite ("azHolder", "azzyPlaceholder.png")
//     loadSprite ("piHolder","pinkiePlaceholder.png")
//     loadSprite ("woHolder", "treehousewallsPlaceholder.png")
//     loadSprite ("doHolder", "door.jpg")


// scene("main", (levelIdx) => {
// const SPEED = 200

// //
// const player = add([
//    sprite("azHolder"),
//    pos(636,height()- 295),
//    scale(.1),
//    area(),
// ])


// onKeyDown("left", () => {
// 	player.move(-SPEED, 0)
// })

// onKeyDown("right", () => {
// 	player.move(SPEED, 0)
// })

// onKeyDown("up", () => {
// 	player.move(0, -SPEED)
// })

// onKeyDown("down", () => {
// 	player.move(0, SPEED)
// })


// const levels = [
// 		[
// 			"===|====",
// 			"=      =",
// 			"= $    =",
// 			"=    a =",
// 			"=      =",
// 			"=   @  =",
// 			"========",
// 		],

// 	]

// 	level = addLevel (levels), {
// 		tileWidth: 32,
// 		tileHeight: 32,
// 		pos: vec2(64, 64),
// 		tiles: {
// 			"=": () => [
// 				sprite("woHolder"),
// 				body({ isStatic: true }),
// 				anchor("center"),
// 			],
// 		}
// 	}

// 			"@"; () => [
// 				sprite("azzHolder"),
// 				anchor("center"),
// 				"player",
//         ]
// 			,
// 			"|"; () => [
// 				sprite("doHolder"),
// 				area(),
// 				body({ isStatic: true }),
// 				anchor("center"),
// 				"door",
// 			],
//       },


</script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- <script src="script.js"></script>
        <script src="https://unpkg.com/kaboom@3000.0.1/dist/kaboom.js"></script>

<script>
    kaboom();
</script>

        </script>
    </body>
</html>
</script>

