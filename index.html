<!DOCTYPE html>
<html>
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="style.css" rel="stylesheet" type="text/css" />
        <style>
            /* CSS */

        </style>

        <title>ProjectVD</title>
    </head>
    <body>
        <!-- HTML -->
        <script type="module">
    import kaboom from "https://unpkg.com/kaboom@3000.0.1/dist/kaboom.mjs";

kaboom({
    background: [74, 48, 82],
    fullscreen: true,
})
loadSprite ("azHolder", "azzyPlaceholder.png")
loadSprite ("piHolder","pinkiePlaceholder.png")
// loadSprite ("woHolder", "purplesteel.png")
// loadSprite ("doHolder", "door.png")
// loadSprite ("lockedDoor", "doorPlaceholder.png")
//loadSprite("outsideHolder", "kaboomjs.png")
loadSprite("mystic", "mysticflour.png")
loadSprite("daria", "DariaMorgendorffer.png")
loadSprite("madoka", "Madoka.png")
// loadSprite("key", "key.png")
// loadSprite("Fake1", "fakekey1.png")
// loadSprite("Fake2", "fakekey2.png")



//mvp - backup code js in case
// loadSprite ("azHolder", "azzyPlaceholder.png")
// loadSprite ("piHolder","pinkiePlaceholder.png")
// loadSprite ("woHolder", "treehousewallsPlaceholder.png")
// loadSprite ("doHolder", "door.jpg")
// loadSprite("outsideHolder", "kaboomjs.png")

const SPEED = 200
const ASPEED = 200
const PSPEED = 400
const FSPEED = 40
const MSPEED = 300
const DSPEED = 60
 const player = add([
    sprite("azHolder"),
    pos(636,height()- 295),
    scale(.1),
   area(),
])
    const x = rand(0, width())
	const y = rand(0, height())

add ([
    sprite("piHolder"),
    pos(x, y),
    area(),
    scale(.3),
     move(x,FSPEED),
      offscreen({ destroy: true }),
    "pinky"
])

if(offscreen({destroy:true})){
    add([
        text("he ran away, you need to restart."),
        anchor(center()),
    ])
}

player.onCollide("pinky", () => {
		destory(pinky)
    //player.pos = level.tile2Pos(0, 0)
		go("win")
//         add([
//  ])
	})

scene("win", () => {
	add([
		text("You Win!"),
		//pos(width() / 2, height() / 2),
		anchor(center()),
	])
})

// scene("lose", () => {
// 	add([
// 		text("he got away :( )"),
// 		//pos(width() / 2, height() / 2),
// 		anchor(center()),
// 	])
// })

 onKeyDown("left", () => {
 	player.move(-PSPEED, 0)
 })

 onKeyDown("right", () => {
 	player.move(PSPEED, 0)
 })

 onKeyDown("up", () => {
 	player.move(0, -PSPEED)
 })

 onKeyDown("down", () => {
 	player.move(0, PSPEED)
 })


    let curFont = 0
let curSize = 48
const pad = 24

const builtinFonts = [
	"monospace",
]

const fonts = [
	...builtinFonts,
	"4x4",
	"unscii",
	"FlowerSketches",
	"apl386",
	"Sans-Serif",
]


 const mx = rand(0, width())
const my = rand(0, height())
add ([
    sprite("mystic"),
    pos(mx, my),
    area(),
    scale(.3),
     move(mx,MSPEED),
    "mystic"
])
const dx = rand(0, width())
const dy = rand(0, height())
add ([
    sprite("daria"),
    pos(dx, dy),
    area(),
    scale(.4),
     move(dx,DSPEED),
    "daria"
])
const ax = rand(0, width())
const ay = rand(0, height())
add ([
    sprite("madoka"),
    pos(ax, ASPEED),
    area(),
    scale(.2),
     move(ax, SPEED),
    "madoka"
])


   // text("You found your friend!")
    // pos(12),
 const input = add([
	pos(pad),
	// Render text with the text() component
	text("where is your buddy?! find them before they're gone!", {
		font: fonts[curFont],
		width: width() - pad * 2,
		size: curSize,
		align: "center",
		lineSpacing: 8,
		letterSpacing: 4,
		transform: (idx, ch) => ({
			color: hsl2rgb((time() * 0.2 + idx * 0.1) % 1, 0.7, 0.8),
			pos: vec2(0, wave(-4, 4, time() * 4 + idx * 0.5)),
			scale: wave(1, 1.2, time() * 3 + idx),
			angle: wave(-9, 9, time() * 3 + idx),
		}),
	}),
])


 //}
//)
//go("main", 0)
//     kaboom({
//     fullscreen: true,
//     canvas: document.getElementById("game"),
//     background: [10, 100, 200], // RGB values for black background
// });
//     loadSprite ("azHolder", "azzyPlaceholder.png")
//     loadSprite ("piHolder","pinkiePlaceholder.png")
//     loadSprite ("woHolder", "treehousewallsPlaceholder.png")
//     loadSprite ("doHolder", "door.jpg")


// scene("main", (levelIdx) => {
// const SPEED = 200

// //
// const player = add([
//    sprite("azHolder"),
//    pos(636,height()- 295),
//    scale(.1),
//    area(),
// ])


// onKeyDown("left", () => {
// 	player.move(-SPEED, 0)
// })

// onKeyDown("right", () => {
// 	player.move(SPEED, 0)
// })

// onKeyDown("up", () => {
// 	player.move(0, -SPEED)
// })

// onKeyDown("down", () => {
// 	player.move(0, SPEED)
// })


// const levels = [
// 		[
// 			"===|====",
// 			"=      =",
// 			"= $    =",
// 			"=    a =",
// 			"=      =",
// 			"=   @  =",
// 			"========",
// 		],

// 	]

// 	level = addLevel (levels), {
// 		tileWidth: 32,
// 		tileHeight: 32,
// 		pos: vec2(64, 64),
// 		tiles: {
// 			"=": () => [
// 				sprite("woHolder"),
// 				body({ isStatic: true }),
// 				anchor("center"),
// 			],
// 		}
// 	}

// 			"@"; () => [
// 				sprite("azzHolder"),
// 				anchor("center"),
// 				"player",
//         ]
// 			,
// 			"|"; () => [
// 				sprite("doHolder"),
// 				area(),
// 				body({ isStatic: true }),
// 				anchor("center"),
// 				"door",
// 			],
//       },


</script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- <script src="script.js"></script>
        <script src="https://unpkg.com/kaboom@3000.0.1/dist/kaboom.js"></script>

<script>
    kaboom();
</script>

        </script>
    </body>
</html>
</script>

